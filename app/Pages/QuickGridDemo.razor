@page "/quickgriddemo"
<h2>QuickGrid Close options Demo</h2>
<p>You can now close the QuickGrid column options UI using the new CloseColumnOptionsAsync method.</p>
@using Microsoft.AspNetCore.Components.QuickGrid;
<QuickGrid @ref="movieGrid" Items="filteredMovies" RowClass="GetRowCssClass">
    <PropertyColumn Property="@(m => m.Title)" Title="Title">
        <ColumnOptions>
            <input type="search" @bind="titleFilter" placeholder="Filter by title" @bind:after="@ApplyFilter" />
        </ColumnOptions>
    </PropertyColumn>
    <PropertyColumn Property="@(m => m.Genre)" Title="Genre" />
    <PropertyColumn Property="@(m => m.ReleaseYear)" Title="Release Year" />
</QuickGrid>

@code {
    private QuickGrid<Movie>? movieGrid;
    private List<Movie> movieList = new();
    private string titleFilter = string.Empty; protected override void OnInitialized()
    {
        movieList = GenerateMovies(50);
    }

    private List<Movie> GenerateMovies(int count)
    {
        string[] titles = { "Inception", "The Matrix", "Interstellar", "Gladiator", "Avatar", "Titanic", "The Dark Knight",
"Forrest Gump", "The Godfather", "Pulp Fiction", "The Shawshank Redemption", "Jurassic Park",
"The Avengers", "Iron Man", "Spider-Man", "Black Panther", "Doctor Strange", "The Batman",
"Dune", "The Revenant" };

        string[] genres = { "Action", "Sci-Fi", "Drama", "Thriller", "Horror", "Fantasy", "Comedy", "Crime", "Mystery",
"Adventure" };

        Random random = new();

        return Enumerable.Range(1, count).Select(i => new Movie
        {
            Title = $"{titles[random.Next(titles.Length)]} {random.Next(1, 5)}",
            Genre = genres[random.Next(genres.Length)],
            ReleaseYear = random.Next(1980, 2025)
        }).ToList();
    }

    private IQueryable<Movie> filteredMovies => movieList
    .Where(m => string.IsNullOrWhiteSpace(titleFilter) || m.Title.Contains(titleFilter, StringComparison.OrdinalIgnoreCase))
    .AsQueryable();

    private void ApplyFilter()
    {
        movieGrid?.RefreshDataAsync();
    }
    private string GetRowCssClass(Movie movie)
    {
        return movie.ReleaseYear < 2005 ? "old-movie" : "new-movie";
    }
    private class Movie
    {
        public string Title { get; set; } = string.Empty;
        public string Genre { get; set; } = string.Empty;
        public int ReleaseYear { get; set; }
    }
}

<style>
    .odd-row {
        background-color: #f2f2f2;
        /* Light gray */
    }

    .even-row {
        background-color: #ffffff;
        /* White */
    }
</style>